<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="your_csrf_token_here">
    <title>Case Opening</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <script>
        $(document).ready(function() {
            var openedCases = 0;
            var totalSum = 0;

            $("#btn-open-case").click(function() {
                $('#btn-open-case').prop('disabled', true);
                $.ajaxSetup({
                    headers: {
                        'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content')
                    }
                });
                $.ajax({
                    type: "POST",
                    url: '/case/open',
                    data: { "caseid": $("#case-title").data("caseid") },
                    dataType: 'json',
                    success: function (data) {
                        openedCases++;
                        var wonIndex = data[1];
                        totalSum += data[0][wonIndex]['price'];
                        var html = '<div id="items-roulette-spinnable-wrap">';
                        $.each(data[0], function(index, value) {
                            var stattrak = value['stattrak'] ? 'Stattrakâ„¢ ' : '';
                            var souvenir = value['souvenir'] ? 'Souvenir ' : '';
                            html += '<div class="item items-roulette-item" id="items-roulette-item-' + index + '">';
                            html += '<div class="item-image-block">';
                            html += '<img src="/storage/images/itemz/' + value['image'] + '" alt="' + value['weaponName'] + ' | ' + value['patternName'] + '" class="item-image item-abstract-image center-block">';
                            html += '<div class="item-image-shadow"></div>';
                            html += '</div>';
                            html += '<div class="item-title item-background-' + value['rarity'] + '">';
                            html += '<p class="item-title-weapon text-center">' + stattrak + souvenir + value['weaponName'] + '</p>';
                            html += '<p class="item-title-pattern text-center">' + value['patternName'] + '</p>';
                            html += '</div>';
                            html += '</div>';
                        });
                        html += '</div>';
                        $("#items-roulette-spinnable-wrap").replaceWith(html);

                        var rouletteSpinnable = $("#items-roulette-spinnable");
                        rouletteSpinnable.css("margin-left", "0");
                        var randomMargin = ((130 + 3) * wonIndex) + Math.floor(Math.random() * ((-96) - (-222) + 1)) + (-222);

                        rouletteSpinnable.animate({
                            'marginLeft' : "-=" + randomMargin + "px"
                        }, {
                            duration: 5000,
                            specialEasing: {
                                marginLeft: "easeOutQuart"
                            },
                            complete: function() {
                                $("#top-user-money").text((parseFloat($("#top-user-money").text()) + data[0][wonIndex]['price']).toFixed(2));
                                $('#btn-open-case').prop('disabled', false);
                            }
                        });
                    },
                    error: function (data) {
                        console.log('Error:', data);
                    }
                });
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>First Blood Event</title>

</head>
<body>
    <header>
        <div class="logo">Case Craze</div>
    
        <div class="nav-wrapper">
            <nav>
                <ul>
                    <li><a href="index.html">Strona GÅ‚Ã³wna</a></li>
                    <li><a href="cases.html"><b>Skrzynki</b></a></li>
                    <li><a href="promotions.html">Promocje</a></li>
                    <li><a href="contact.html">Kontakt</a></li>
                </ul>
            </nav>
        </div>
    
        <div class="login-wrapper">
            <div class="login-form">
                <input type="text" id="login" name="login" placeholder="Login" required>
                <input type="password" id="password" name="password" placeholder="HasÅ‚o" required>
                <button class="login-btn">Zaloguj siÄ™</button>
            </div>
        </div>
    </header>
    <main>
        <section class="cases">
            <div class="case"><a href="case1.html">ðŸ”¥ Skrzynka Premium</br><img src="grafiki/case1.png"></a></div> 
            <div class="case"><a href="case2.html">ðŸ’Ž Skrzynka Diamentowa</br><img src="grafiki/case2.png"></a></div>
            <div class="case"><a href="case3.html">ðŸ¤‘ Skrzynka Ekonomiczna</br><img src="grafiki/case3.png"></a></div>
            <div class="case"><a href="case4.html">ðŸŽ² Mystery Box</br><img src="grafiki/case4.png"></a></div>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 First Blood. Wszelkie prawa zastrzeÅ¼one.</p>
    </footer>
</body>
</html>
